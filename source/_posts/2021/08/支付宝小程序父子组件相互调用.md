---
title: 支付宝小程序父子组件相互调用
date: 2021-08-25 11:45:56
tags:
  - 支付宝小程序
categories:
  - 支付宝小程序
description:
---

组件调用方式与vue类似，但是还是有一些区别，记录一下。

<!-- more -->

# 父组件传值给子组件

```js
// 父组件
<child-name title="title"/>

//子组件
props:{
  title:''
}
<view>{{title}}</view>

```

# 子组件调用父组件方法

```js
// 子组件
props:{
  onYourMethod:()=>({})
}
methods:{
  onTapSubmit(){
    this.props.onYourMethod('from child')
  }
}
// 父组件
<child-name onTapSubmit="fatherMethod" />

fatherMethod(e){
  console.log(e)  // from child
}
```

# 父组件调用子组件方法

```js
// 父组件
<child-name ref='childRefName' />

childRefName(ref){
  this.ref=ref
}
youFun(){
  this.ref.childMethod('from father')
}

// 子组件
methods:{
  childMethod(e){
    console.log(e) //from father
  }
}
```

> **使用ref时需要开启component2 不然ref不会生效**

# 兄弟组件相互调用

大致思路是这样的：组件A -> 父组件 -> 组件B

```js
// 子组件A
props:{
  onEmitToBrother:()=>({})
}
methods:{
  onTapAButton(){
    this.props.onEmitToBrother('refB','comBFun','from A')
  },
  comAFun(e){
    console.log(e)  // from B
  }
}

// 子组件B
// 子组件A
props:{
  onEmitToBrother:()=>({})
}
methods:{
  onTapBButton(){
    this.props.onEmitToBrother('refA','comAFun','from B')
  },
  comBFun(e){
    console.log(e) // from A
  }
}

// 父组件
<A-name onEmitToBrother="onEmitToBrother" ref="refA" />
<B-name onEmitToBrother="onEmitToBrother" ref="refB" />


refA(ref){
  this.refA=ref
}
refB(ref){
  this.refB=ref
}
onEmitToBrother(refName,funName,args){
  this[refName][funName](args)
}

```

> 如果有其他更好的方案 欢迎补充






<!-- markdownlint-disable MD041 MD002--> 