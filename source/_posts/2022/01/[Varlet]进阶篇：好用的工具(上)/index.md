---
theme: condensed-night-purple
---

## å‰è¨€

åœ¨`cli`çš„å¼€å‘å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç”¨ä¸Šäº†ä¸€äº›å¥½ç”¨çš„å·¥å…·ï¼Œè¿™æå¤§çš„æå‡äº†æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ã€‚

åœ¨æœ¬ç¯‡ä¸­ï¼Œæˆ‘å°†å¯¹è¿™äº›å¥½ç”¨çš„å·¥å…·è¿›è¡Œä»‹ç»ã€‚

> **æ³¨æ„ï¼šä»¥ä¸‹æ‰€æœ‰ç¤ºä¾‹å‡ä»¥ Macos ç¯å¢ƒä¸ºä¾‹**


<!-- more -->

## å‡†å¤‡å·¥ä½œ

- æˆ‘ä»¬å…ˆæ–°å»ºä¸€ä¸ªç©ºé¡¹ç›®ï¼Œç„¶åæ‰“å¼€å‘½ä»¤è¡Œè¿›å…¥åˆ°è¯¥é¡¹ç›®ä¸­
- æ‰§è¡Œ`npm init`å®Œæˆé¡¹ç›®åˆå§‹åŒ–
- æ­¤æ—¶æˆ‘ä»¬çš„å·¥ç¨‹ä¸­åº”è¯¥æœ‰ä¸€ä¸ª`package.json`æ–‡ä»¶ï¼Œ åœ¨è¯¥æ–‡ä»¶ä¸­å¢åŠ `bin`é…ç½®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º

![image.png](1.png)
- å…¶ä¸­ï¼Œ`write-cli`æ˜¯cliå·¥å…·çš„åç§°ï¼Œå¯¹åº”çš„ value å€¼æ˜¯æ–‡ä»¶å…¥å£
- ç¼–è¾‘`index.js`ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
![image.png](2.png)
**è¿™é‡Œçš„ç¬¬ä¸€è¡Œéå¸¸é‡è¦ï¼ï¼ï¼**\
**è¿™é‡Œçš„ç¬¬ä¸€è¡Œéå¸¸é‡è¦ï¼ï¼ï¼**\
**è¿™é‡Œçš„ç¬¬ä¸€è¡Œéå¸¸é‡è¦ï¼ï¼ï¼**

ç”¨æ¥æŒ‡æ˜è¿è¡Œç¯å¢ƒ

ç„¶åæˆ‘ä»¬é€šè¿‡`npm link`è¿›è¡Œæœ¬åœ°å®‰è£…ï¼Œç„¶åå†æ‰§è¡Œ`write-cli`,å°±å¯ä»¥çœ‹åˆ°è¿è¡Œæ•ˆæœäº†

![image.png](3.png)


## commander

### ä»‹ç»

`commander`æ˜¯`nodejs`å‘½ä»¤è¡Œæ“ä½œçš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼Œæä¾›äº†ç”¨æˆ·å‘½ä»¤è¡Œè¾“å…¥å’Œå‚æ•°è§£æå¼ºå¤§åŠŸèƒ½ã€‚

### å®‰è£…

```shell
npm install commander
```

### åŸºæœ¬ç”¨æ³•

```
const { Command } = require('commander');
const program = new Command()
program.version(require('./package').version, '-v, --version')
program.parse();
```

![image.png](4.png)

å½“ä½ å‡ºç°è¿™æ ·çš„ä¿¡æ¯æ—¶ï¼Œè¯´æ˜ä½ å·²ç»æŒæ¡äº†`commander`çš„åŸºæœ¬ç”¨æ³•

### createåŸæ¥å¦‚æ­¤ç®€å•

ç›¸ä¿¡ä¸å°‘å°ä¼™ä¼´ä»¬éƒ½ç”¨è¿‡`Vue CLI`æˆ–è€…`create-react-app`è¿™äº›è‘—åçš„`cli`å·¥å…·ï¼Œé‡Œé¢è‚¯å®šå°‘ä¸äº†åˆ›å»ºé¡¹ç›®çš„å‘½ä»¤`create`ï¼Œæˆ‘ä»¬å°±ä¸€èµ·æ¥çœ‹çœ‹`create`æ˜¯å¦‚ä½•å·¥ä½œçš„å§

![image.png](5.png)

ä¸€äº›è§£é‡Šï¼š

- æˆ‘ä»¬é€šè¿‡`.command()`ç±»é…ç½®`create`å‘½ä»¤ã€‚ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå‘½ä»¤åç§°ã€‚å‘½ä»¤å‚æ•°è·Ÿåœ¨åç§°åé¢
- å°–æ‹¬å·è¡¨ç¤ºå‚æ•°å¯ä¸ºå¿…é€‰(æ–¹æ‹¬å·ä¸ºå¯é€‰)
- `description`ä¸ºå‘½ä»¤çš„æè¿°
- `action`å¤„ç†å­çº§å‘½ä»¤

> å…·ä½“çš„`create`çš„ä»£ç å®ç°,å°†ä¼šåœ¨åç»­çš„ç¯‡å¹…ä¸­æ›´è¯¦ç»†çš„è®²è§£

## inquirer

æˆ‘ä»¬åœ¨ä½¿ç”¨`cli`ä¸­ä¸å¯é¿å…çš„ä¼šæœ‰ä¸€äº›å‘½ä»¤è¡Œäº¤äº’ã€‚

åœ¨ä¸Šæ–‡æåˆ°çš„ä¸¤ä¸ªå‡ºè‰²çš„è„šæ‰‹æ¶çš„ä½¿ç”¨ä¸­ä»¥åŠæˆ‘ä»¬`npm init`æ—¶éƒ½å‡ºç°äº†ä¸€äº›ç”¨æˆ·äº¤äº’ã€‚

å› æ­¤åœ¨æˆ‘ä»¬çš„`cli`é¡¹ç›®ä¸­è¦ä½¿ç”¨è¿™æ ·çš„äº¤äº’çš„è¯ï¼Œå°±ä¸å¾—ä¸ä»‹ç»ä¸€ä¸‹`inquirer`äº†ã€‚

### å®‰è£…

```shell
npm install inquirer
```

### å¸¸è§ç”¨æ³•

æˆ‘ä»¬ä»¥[varlet-cli](https://varlet.gitee.io/varlet-ui/#/zh-CN/cli)ä¸ºä¾‹æ¥å®ç°é€‰æ‹©çš„äº¤äº’

![image.png](6.png)

æˆ‘ä»¬æ¥æ”¹å†™ä¸€ä¸‹`create`

```js
const create = ()=>{
  inquirer.prompt([
    {
        name: 'Please select your component library programming style',
        type: 'list',
        choices: ['sfc', 'tsx'],
    },
  ])
}
```

å†æ¬¡æ‰§è¡Œ`write-cli create hello`ï¼Œç›¸ä¿¡èªæ˜çš„ä½ å·²ç»è·‘å‡ºæ¥äº†è·Ÿä¸Šå›¾ä¸€æ ·çš„ç•Œé¢ç•Œé¢äº†ã€‚

çœ‹åˆ°è¿™é‡Œï¼Œç›¸ä¿¡æœ‰å°ä¼™ä¼´ä»¬ä¼šæœ‰æ–°çš„ç–‘é—®äº†ï¼Œå¦‚ä½•æ•è·ç”¨æˆ·çš„è¾“å…¥æˆ–è€…é€‰æ‹©å‘¢ã€‚

ä¸æ€¥ï¼Œæˆ‘ä»¬æ…¢æ…¢å¾€ä¸‹çœ‹

```js
inquirer.prompt([
  {
    name: 'Please input some text',
    type: 'input' // ä¾›ç”¨æˆ·è¾“å…¥
  }
])
```
ç„¶åæˆ‘ä»¬ä»å®˜æ–¹çš„æ–‡æ¡£ä¸­çš„

`inquirer.prompt(questions, answers) -> promise`

æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œç”¨æˆ·çš„è¾“å…¥ä»¥`promise`çš„å½¢å¼è¿”å›

å› æ­¤æˆ‘ä»¬ä½¿ç”¨`async await`æ¥æ¥æ”¶ç”¨æˆ·çš„è¾“å…¥

è¿™æ ·æˆ‘ä»¬å°±å®Œæˆäº†æ•è·

![image.png](7.png)

## chalk

æˆ‘ä»¬å¯ä»¥é€šè¿‡`chalk`æ¥æ˜¯æˆ‘ä»¬çš„å‘½ä»¤è¡Œé¢œè‰²å˜å¾—ä¸°å¯Œå¤šå½©ã€‚

### å®‰è£…

```
npm install chalk 
```
> **åœ¨æœ¬æ–‡ä¸­ä¸ºäº†æ–¹ä¾¿æ¼”ç¤º æˆ‘ä»¬ä½¿ç”¨4.1.2ç‰ˆæœ¬**

### ç®€å•ä½¿ç”¨

æˆ‘ä»¬ä¸¾å‡ ä¸ªæ —å­ğŸŒ°

```js
const log = console.log;

log(chalk.magenta('Hello') + ' Varlet' + chalk.red('!'));

log(chalk.blue.bgYellow.bold('Hello Varlet!'));

log(chalk.green('Hello', 'Varlet!', 'Jokerrr', 'bar', 'biz', 'baz'));
```
![image.png](8.png)

åœ¨`cli`ä¸­æˆ‘ä»¬ä¼šå°†ä¸åŒçš„æç¤ºä¿¡æ¯ç”¨ä¸åŒçš„è‰²å½©åŒºåˆ†å¼€è¿›è¡Œè¾“å‡ºã€‚

## æœ€å

ä»¥ä¸Šä¸ºæˆ‘ä»¬ç”¨åˆ°çš„ä¸€éƒ¨åˆ†å·¥å…·åº“ï¼Œè¿˜æœ‰ä¸€äº›åŒæ ·å¥½ç”¨çš„åº“æˆ‘å°†åœ¨ã€Šè¿›é˜¶ç¯‡ï¼šå¥½ç”¨çš„å·¥å…·(ä¸‹)ã€‹ä¸­ç»§ç»­ä»‹ç»ï¼Œæ•¬è¯·æœŸå¾…ã€‚

> å‚è€ƒæ–‡æ¡£ [commander](https://github.com/tj/commander.js),[inquirer](https://github.com/SBoudrias/Inquirer.js),[chalk](https://github.com/chalk/chalk),